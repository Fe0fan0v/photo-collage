/**
 * Telegram Promo Screen
 * Shows confirmation and Telegram promotion after email sent
 */

import { createElement } from '../utils/helpers.js';
import logoUrl from '../assets/logo.png';

export class TelegramPromoScreen {
  constructor(app) {
    this.app = app;
  }

  render() {
    const screen = createElement('div', { className: 'screen screen-telegram-promo' });

    // Logo header (gray background)
    const header = createElement('div', { className: 'logo-header' });
    const logoLink = createElement('a', { href: 'http://seletti.ru', target: '_blank' });
    const logo = createElement('img', {
      className: 'logo-image',
      src: logoUrl,
      alt: 'SELETTI × DELIGHT'
    });
    logoLink.appendChild(logo);
    header.appendChild(logoLink);
    screen.appendChild(header);

    // Close button (return to success screen)
    const closeButton = createElement('button', {
      className: 'close-button',
      onClick: () => this.handleClose()
    });
    closeButton.innerHTML = '×';
    screen.appendChild(closeButton);

    // Content
    const content = createElement('div', { className: 'telegram-promo-content' });

    // Success message
    const successMessage = createElement('h1', { className: 'telegram-promo-title' });
    successMessage.textContent = 'Готово!';
    content.appendChild(successMessage);

    // Telegram promotion text
    const promoText = createElement('p', { className: 'telegram-promo-text' });
    promoText.textContent = 'Выиграть тарелку из новой коллекции в Telegram';
    content.appendChild(promoText);

    // Telegram logo (using SVG icon)
    const telegramLogo = createElement('div', { className: 'telegram-logo' });
    telegramLogo.innerHTML = `
      <svg viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="telegram-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#2AABEE;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#229ED9;stop-opacity:1" />
          </linearGradient>
        </defs>
        <circle cx="120" cy="120" r="120" fill="url(#telegram-gradient)"/>
        <path fill="#FFFFFF" d="M81.229 128.772l14.237 39.406s1.78 3.687 3.686 3.687 30.255-29.492 30.255-29.492l31.525-60.89L81.737 118.6s-1.782.691-1.782 2.474c0 1.782-.726 7.698-.726 7.698z"/>
        <path fill="#D2E5F1" d="M100.106 138.878l-2.733 29.046s-1.144 8.9 7.754 0 17.415-15.763 17.415-15.763"/>
        <path fill="#B5CFE4" d="M81.486 130.178l-17.8-5.467s-2.133-.935-1.431-3.03c.146-.436.389-.835 1.556-1.629 5.352-3.647 99.08-38.044 99.08-38.044s1.786-.69 3.197-.067c.691.312 1.143.853 1.304 1.48.069.386.098.77.098 1.152-.192 1.467-.414 8.156-.414 8.156l-14.03 73.278s-.811 3.623-3.738 3.74c-2.926.117-7.714-2.474-8.538-3.075-.586-.426-26.92-17.17-36.21-25.126-.577-.487-.977-1.15-.977-1.85 0-.623.374-1.155.965-1.557 6.537-5.93 14.423-13.452 23.674-22.76 1.268-1.294 2.527-2.597 3.76-3.91.957-.963 1.9-1.94 2.827-2.93.39-.413.78-.825 1.167-1.238l2.244-2.39c.603-.632 1.2-1.268 1.791-1.908.39-.425.778-.849 1.163-1.276.193-.214.386-.427.577-.641.763-.851 1.515-1.703 2.258-2.555.743-.851 1.475-1.702 2.197-2.551.722-.85 1.435-1.699 2.137-2.547.702-.848 1.393-1.693 2.073-2.538.68-.844 1.35-1.686 2.01-2.526.659-.84 1.308-1.677 1.946-2.511.638-.834 1.266-1.664 1.883-2.491.617-.827 1.223-1.649 1.82-2.468.596-.819 1.181-1.633 1.756-2.443.575-.81 1.14-1.616 1.694-2.417.554-.801 1.098-1.598 1.632-2.39.534-.792 1.057-1.578 1.57-2.36.513-.782 1.016-1.558 1.508-2.329.492-.771.975-1.537 1.447-2.297.472-.76.935-1.514 1.388-2.262.453-.748.896-1.49 1.33-2.226.434-.736.858-1.466 1.272-2.189.414-.723.819-1.44 1.214-2.15.395-.71.78-1.413 1.156-2.11.376-.697.742-1.387 1.099-2.07.357-.683.704-1.359 1.042-2.028.338-.669.667-1.33.986-1.984.319-.654.629-1.3.93-1.939.301-.639.593-1.27.876-1.893.283-.623.557-1.238.822-1.845.265-.607.521-1.206.768-1.796.247-.59.485-1.172.714-1.745.229-.573.449-1.138.66-1.694.211-.556.413-1.103.607-1.641.194-.538.379-1.067.555-1.586.176-.519.343-1.028.502-1.527.159-.499.309-.988.450-1.466.141-.478.274-.946.398-1.403.124-.457.239-.903.346-1.338.107-.435.206-.859.296-1.272.09-.413.172-.814.245-1.204.073-.39.138-.768.194-1.135.056-.367.104-.722.143-1.065.039-.343.070-.674.092-.993.022-.319.036-.626.041-.920.005-.294.002-.576-.010-.845-.012-.269-.033-.525-.063-.768-.03-.243-.069-.473-.115-.689-.046-.216-.1-.419-.162-.608-.062-.189-.132-.364-.209-.524-.077-.16-.162-.306-.254-.437-.092-.131-.191-.248-.297-.350-.106-.102-.219-.189-.339-.261-.12-.072-.247-.129-.381-.170-.134-.041-.275-.067-.423-.077-.148-.01-.303-.004-.465.018-.162.022-.331.057-.507.105-.176.048-.359.109-.549.183-.19.074-.387.161-.591.261s-.419.214-.645.341c-.226.127-.464.267-.714.420-.25.153-.512.319-.786.498-.274.179-.56.371-.858.576-.298.205-.608.423-.93.654-.322.231-.655.474-1 .729-.345.255-.701.522-1.068.801-.367.279-.745.57-1.134.873-.389.303-.788.618-1.198.945-.41.327-.83.666-1.260 1.017-.43.351-.87.714-1.320 1.089-.45.375-.909.762-1.378 1.161-.469.399-.947.81-1.434 1.233-.487.423-.983.858-1.487 1.305-.504.447-1.017.906-1.538 1.377-.521.471-1.050.954-1.587 1.449-.537.495-1.082 1.002-1.634 1.521-.552.519-1.112 1.050-1.679 1.593s-1.143 1.096-1.729 1.657c-.586.561-1.180 1.134-1.782 1.719-.602.585-1.212 1.182-1.829 1.791-.617.609-1.242 1.230-1.874 1.863-.632.633-1.271 1.278-1.917 1.935-.646.657-1.299 1.326-1.958 2.007-.659.681-1.325 1.374-1.997 2.079-.672.705-1.350 1.422-2.034 2.151-.684.729-1.374 1.470-2.069 2.223-.695.753-1.395 1.518-2.100 2.295-.705.777-1.415 1.566-2.129 2.367-.714.801-1.433 1.614-2.155 2.439-.722.825-1.448 1.662-2.178 2.511-.73.849-1.463 1.710-2.199 2.583-.736.873-1.475 1.758-2.216 2.655s-1.484 1.805-2.227 2.720c-.743.915-1.488 1.842-2.234 2.781-.746.939-1.493 1.890-2.241 2.853-.748.963-1.497 1.938-2.245 2.925-.748.987-1.496 1.986-2.243 2.997-.747 1.011-1.493 2.034-2.238 3.069-.745 1.035-1.488 2.082-2.229 3.141-.741 1.059-1.480 2.130-2.216 3.213-.736 1.083-1.469 2.178-2.198 3.285-.729 1.107-1.454 2.226-2.175 3.357-.721 1.131-1.437 2.274-2.148 3.429-.711 1.155-1.417 2.322-2.117 3.501-.700 1.179-1.394 2.370-2.081 3.573-.687 1.203-1.368 2.418-2.041 3.645-.673 1.227-1.339 2.466-1.997 3.717-.658 1.251-1.308 2.514-1.949 3.789-.641 1.275-1.274 2.562-1.898 3.861-.624 1.299-1.239 2.610-1.844 3.933-.605 1.323-1.201 2.658-1.786 4.005-.585 1.347-1.160 2.706-1.724 4.077-.564 1.371-1.117 2.754-1.659 4.149-.542 1.395-1.072 2.802-1.590 4.221-.518 1.419-1.024 2.850-1.518 4.293-.494 1.443-.975 2.898-1.443 4.365-.468 1.467-.923 2.946-1.365 4.437-.442 1.491-.870 2.994-1.284 4.509-.414 1.515-.814 3.042-1.200 4.581-.386 1.539-.757 3.090-1.113 4.653-.356 1.563-.697 3.138-1.023 4.725-.326 1.587-.636 3.186-.931 4.797-.295 1.611-.574 3.234-.837 4.869-.263 1.635-.510 3.282-.741 4.941-.231 1.659-.446 3.330-.644 5.013-.198 1.683-.379 3.378-.544 5.085-.165 1.707-.313 4.426-.444 6.157-.131 1.731-.245 3.474-.342 5.229-.097 1.755-.176 3.522-.238 5.301-.062 1.779-.106 3.570-.133 5.373-.027 1.803-.036 3.618-.027 5.445.009 1.827.039 3.666.090 5.517.051 1.851.123 3.714.216 5.589.093 1.875.208 3.762.344 5.661.136 1.899.293 3.810.471 5.733.178 1.923.377 3.858.597 5.805.220 1.947.461 3.906.722 5.877.261 1.971.543 3.954.845 5.949.302 1.995.625 4.002.968 6.021.343 2.019.706 4.050 1.089 6.093.383 2.043.786 4.098 1.209 6.165.423 2.067.866 4.146 1.328 6.237.462 2.091.944 4.194 1.445 6.309.501 2.115 1.022 4.242 1.561 6.381.539 2.139 1.097 4.290 1.673 6.453.576 2.163 1.171 4.338 1.784 6.525.613 2.187 1.244 4.386 1.893 6.597.649 2.211 1.316 4.434 2.001 6.669.685 2.235 1.387 4.482 2.106 6.741.719 2.259 1.455 4.530 2.208 6.813.753 2.283 1.523 4.578 2.309 6.885.786 2.307 1.589 4.626 2.408 6.957.819 2.331 1.654 4.674 2.505 7.029.851 2.355 1.718 4.722 2.600 7.101.882 2.379 1.780 4.770 2.693 7.173.913 2.403 1.841 4.818 2.784 7.245.943 2.427 1.901 4.866 2.873 7.317.972 2.451 1.959 4.914 2.960 7.389 1.001 2.475 2.016 4.962 3.045 7.461 1.029 2.499 2.072 5.010 3.128 7.533 1.056 2.523 2.126 5.058 3.209 7.605 1.083 2.547 2.179 5.106 3.288 7.677 1.109 2.571 2.231 5.154 3.365 7.749 1.134 2.595 2.281 5.202 3.440 7.821 1.159 2.619 2.330 5.250 3.513 7.893 1.183 2.643 2.378 5.298 3.585 7.965 1.207 2.667 2.426 5.346 3.656 8.037 1.230 2.691 2.472 5.394 3.725 8.109 1.253 2.715 2.517 5.442 3.792 8.181 1.275 2.739 2.561 5.490 3.857 8.253 1.296 2.763 2.603 5.538 3.920 8.325 1.317 2.787 2.644 5.586 3.981 8.397 1.337 2.811 2.684 5.634 4.040 8.469 1.356 2.835 2.722 5.682 4.097 10.540 1.375 2.972 2.759 5.956 4.152 8.952 1.393 2.996 2.795 6.004 4.205 9.024 1.410 3.020 2.829 6.052 4.256 9.096 1.427 3.044 2.862 6.100 4.305 9.168 1.443 3.068 2.894 6.148 4.352 9.240 1.458 3.092 2.924 6.196 4.397 9.312 1.473 3.116 2.953 6.244 4.440 9.384 1.487 3.140 2.981 6.292 4.481 9.456 1.500 3.164 3.007 6.340 4.520 9.528 1.513 3.188 3.032 6.388 4.557 9.600 1.525 3.212 3.056 6.436 4.593 9.672 1.537 3.236 3.080 6.484 4.628 9.744 1.548 3.260 3.102 6.532 4.661 9.816 1.559 3.284 3.123 6.580 4.692 9.888 1.569 3.308 3.143 6.628 4.722 9.960 1.579 3.332 3.163 6.676 4.751 10.032 1.588 3.356 3.181 6.724 4.778 10.104 1.597 3.380 3.199 6.772 4.805 10.176 1.606 3.404 3.216 6.820 4.830 10.248 1.614 3.428 3.232 6.868 4.853 10.320 1.621 3.452 3.247 6.916 4.876 10.392 1.629 3.476 3.261 6.964 4.897 10.464 1.636 3.500 3.276 7.012 4.918 10.536 1.642 3.524 3.288 7.060 4.937 10.608 1.649 3.548 3.301 7.108 4.955 10.680 1.654 3.572 3.313 7.156 4.974 10.752 1.661 3.596 3.325 7.204 4.991 10.824 1.666 3.620 3.336 7.252 5.008 10.896 1.672 3.644 3.347 7.300 5.024 10.968 1.677 3.668 3.357 7.348 5.039 11.040 1.682 3.692 3.367 7.396 5.053 11.112 1.686 3.716 3.376 7.444 5.067 11.184 1.691 3.740 3.385 7.492 5.080 11.256 1.695 3.764 3.393 7.540 5.092 11.328 1.699 3.788 3.401 7.588 5.104 11.400 1.703 3.812 3.408 7.636 5.114 11.472 1.706 3.836 3.415 7.684 5.124 11.544 1.710 3.860 3.421 7.732 5.133 11.616 1.713 3.884 3.427 7.780 5.141 11.688 1.716 3.908 3.432 7.828 5.148 11.760 1.719 3.932 3.437 7.876 5.155 11.832 1.721 3.956 3.441 7.924 5.161 11.904 1.724 3.980 3.445 7.972 5.166 11.976 1.726 4.004 3.448 8.020 5.171 12.048 1.728 4.028 3.451 8.068 5.175 12.120 1.730 4.052 3.453 8.116 5.179 12.192 1.731 4.076 3.455 8.164 5.182 12.264 1.733 4.100 3.456 8.212 5.184 12.336 1.734 4.124 3.457 8.260 5.186 12.408 1.735 4.148 3.457 8.308 5.187 12.480 1.735 4.172 3.456 8.356 5.187 12.552 1.736 4.196 3.455 8.404 5.187 12.624 1.736 4.220 3.453 8.452 5.186 12.696 1.735 4.244 3.451 8.500 5.184 12.768 1.735 4.268 3.448 8.548 5.181 12.840 1.734 4.292 3.444 8.596 5.178 12.912 1.732 4.316 3.440 8.644 5.174 12.984 1.731 4.340 3.435 8.692 5.169 13.056 1.729 4.364 3.429 8.740 5.163 13.128 1.726 4.388 3.423 8.788 5.157 13.200 1.724 4.412 3.416 8.836 5.150 13.272 1.721 4.436 3.408 8.884 5.142 13.344 1.718 4.460 3.400 8.932 5.133 13.416 1.714 4.484 3.391 8.980 5.124 13.488 1.711 4.508 3.381 9.028 5.114 13.560 1.707 4.532 3.371 9.076 5.103 13.632 1.703 4.556 3.360 9.124 5.091 13.704 1.698 4.580 3.348 9.172 5.079 13.776 1.693 4.604 3.336 9.220 5.066 13.848 1.688 4.628 3.323 9.268 5.052 13.920 1.683 4.652 3.309 9.316 5.037 13.992 1.677 4.676 3.295 9.364 5.022 14.064 1.671 4.700 3.280 9.412 5.006 14.136 1.665 4.724 3.264 9.460 4.989 14.208 1.658 4.748 3.248 9.508 4.971 14.280 1.651 4.772 3.231 9.556 4.953 14.352 1.644 4.796 3.213 9.604 4.933 14.424 1.636 4.820 3.195 9.652 4.913 14.496 1.628 4.844 3.176 9.700 4.892 14.568 1.620 4.868 3.156 9.748 4.870 14.640 1.611 4.892 3.136 9.796 4.848 14.712 1.602 4.916 3.115 9.844 4.824 14.784 1.592 4.940 3.093 9.892 4.800 14.856 1.582 4.964 3.071 9.940 4.775 14.928 1.572 4.988 3.048 9.988 4.749 15.000 1.561 5.012 3.024 10.036 4.722 15.072 1.550 5.036 2.999 10.084 4.695 15.144 1.538 5.060 2.974 10.132 4.666 15.216 1.526 5.084 2.948 10.180 4.637 15.288 1.514 5.108 2.922 10.228 4.607 15.360 1.501 5.132 2.895 10.276 4.576 15.432 1.488 5.156 2.867 10.324 4.544 15.504 1.474 5.180 2.839 10.372 4.511 15.576 1.460 5.204 2.810 10.420 4.478 15.648 1.445 5.228 2.780 10.468 4.443 15.720 1.430 5.252 2.750 10.516 4.408 15.792 1.414 5.276 2.719 10.564 4.372 15.864 1.398 5.300 2.688 10.612 4.335 15.936 1.381 5.324 2.655 10.660 4.298 16.008 1.364 5.348 2.622 10.708 4.259 16.080 1.347 5.372 2.589 10.756 4.220 16.152 1.329 5.396 2.554 10.804 4.180 16.224 1.310 5.420 2.519 10.852 4.139 16.296 1.291 5.444 2.484 10.900 4.097 16.368 1.271 5.468 2.447 10.948 4.055 16.440 1.251 5.492 2.410 10.996 4.011 16.512 1.230 5.516 2.373 11.044 3.967 16.584 1.209 5.540 2.334 11.092 3.922 16.656 1.187 5.564 2.295 11.140 3.876 16.728 1.165 5.588 2.256 11.188 3.829 16.800 1.142 5.612 2.215 11.236 3.782 16.872 1.118 5.636 2.174 11.284 3.733 16.944 1.094 5.660 2.132 11.332 3.684 17.016 1.070 5.684 2.090 11.380 3.634 17.088 1.045 5.708 2.047 11.428 3.583 17.160 1.019 5.732 2.003 11.476 3.532 17.232 0.993 5.756 1.959 11.524 3.479 17.304 0.966 5.780 1.914 11.572 3.426 17.376 0.939 5.804 1.868 11.620 3.372 17.448 0.911 5.828 1.822 11.668 3.317 17.520 0.883 5.852 1.775 11.716 3.261 17.592 0.854 5.876 1.727 11.764 3.204 17.664 0.824 5.900 1.679 11.812 3.147 17.736 0.794 5.924 1.630 11.860 3.088 17.808 0.763 5.948 1.580 11.908 3.029 17.880 0.732 5.972 1.530 11.956 2.969 17.952 0.700 5.996 1.479 12.004 2.908 18.024 0.668 6.020 1.427 12.052 2.846 18.096 0.635 6.044 1.375 12.100 2.784 18.168 0.601 6.068 1.322 12.148 2.720 18.240 0.567 6.092 1.268 12.196 2.656 18.312 0.532 6.116 1.214 12.244 2.591 18.384 0.497 6.140 1.159 12.292 2.525 18.456 0.461 6.164 1.103 12.340 2.458 18.528 0.425 6.188 1.047 12.388 2.390 18.600 0.388 6.212 0.990 12.436 2.322 18.672 0.350 6.236 0.932 12.484 2.252 18.744 0.312 6.260 0.874 12.532 2.182 18.816 0.273 6.284 0.815 12.580 2.111 18.888 0.234 6.308 0.755 12.628 2.039 18.960 0.194 6.332 0.695 12.676 1.966 19.032 0.154 6.356 0.634 12.724 1.893 19.104 0.113 6.380 0.572 12.772 1.818 19.176 0.071 6.404 0.510 12.820 1.743 19.248 0.029 6.428 0.447 12.868 1.667"/>
      </svg>
    `;
    content.appendChild(telegramLogo);

    // Telegram link
    const telegramLink = createElement('a', {
      className: 'telegram-promo-link',
      href: 'tg://resolve?domain=selettistoremoscow&post=607',
      target: '_blank',
      rel: 'noopener noreferrer'
    });
    telegramLink.textContent = 'Хочу тарелку!';
    content.appendChild(telegramLink);

    // Website link at bottom
    const websiteLink = createElement('a', {
      className: 'telegram-promo-website',
      href: 'https://www.seletti.ru',
      target: '_blank',
      rel: 'noopener noreferrer'
    });
    websiteLink.textContent = 'www.seletti.ru';
    content.appendChild(websiteLink);

    screen.appendChild(content);

    return screen;
  }

  handleClose() {
    // Navigate to final screen
    this.app.navigateTo('final');
  }

  mount() {
    // Screen mounted
  }

  cleanup() {
    // Clean up if needed
  }
}
